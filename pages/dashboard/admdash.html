<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Dashboard - Mohassabatech</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="../../style.css">
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="font-inter bg-gray-100">
    <div id="modal-container"></div>
    <header id="header" class="header py-6 px-4 sm:px-6 lg:px-8 bg-white/80 backdrop-blur-md">
        <div class="flex justify-between items-center header-container">
            <div class="flex items-center gap-4">
                <h1 class="text-2xl sm:text-3xl font-bold text-blue-600 header-logo">
                    <span style="display: flex; align-items: center;">
                        <img src="../../zz.ico" alt="Mohassabatech Icon" class="header-icon" style="width:70px; height: 70px; vertical-align: middle; margin-right: 10px;">
                        Mohassabatech
                    </span>
                 </h1>
            </div>
            <nav class="header-nav">
                <ul class="flex space-x-4 sm:space-x-6">
                    <li><a href="../../index.html" class="header-link" data-i18n="key_1">Home</a></li>
                    <li><a href="../main pages/anncmnt.html" class="header-link" data-i18n="key_2">Announcements</a></li>
                    <li><a href="../main pages/jobs.html" class="header-link" data-i18n="key_3">Jobs</a></li>
                    <button id="logoutButton" class="bg-red-500 hover:bg-red-700 text-white font-bold py-2 px-4 rounded" data-i18n="key_4">Logout</button>
                    <li>
                        <select id="language-switcher" class="header-link">
                            <option value="en">English</option>
                            <option value="fr">Français</option>
                            <option value="ar">العربية</option> 
                        </select>
                    </li>
                </ul>
            </nav>
        </div>
    </header>

    <div class="container mx-auto mt-8 px-4 sm:px-6 lg:px-8 flex dashboard-container">
        <aside class="w-1/4 pr-8 sidebar dashboard-sidebar">
            <!-- Sidebar Menu -->
            <div class="bg-white shadow rounded-lg p-6 sidebar-menu">
                <h2 class="text-xl font-semibold text-gray-800 sidebar-title" data-i18n="key_29">Admin Menu</h2>
                <ul class="space-y-2 sidebar-links">
                    <li><a href="#overview" class="block text-gray-700 hover:text-red-600 transition-colors duration-300 dashboard-link sidebar-link" data-content="overview-content" data-i18n="key_30">Overview</a></li>
                    <li>
                        <div class="block text-gray-700 font-semibold mb-1 sidebar-submenu-title" data-i18n="key_31">Users</div>
                        <ul class="ml-4 space-y-1 sidebar-submenu">
                            <li><a href="#managers" class="block text-gray-600 hover:text-red-600 transition-colors duration-300 dashboard-link sidebar-link" data-content="managers-content" data-i18n="key_32">Managers</a></li>
                            <li><a href="#accountants" class="block text-gray-600 hover:text-red-600 transition-colors duration-300 dashboard-link sidebar-link" data-content="accountants-content" data-i18n="key_33">Accountants</a></li>
                            <li><a href="#companies" class="block text-gray-600 hover:text-red-600 transition-colors duration-300 dashboard-link sidebar-link" data-content="companies-content" data-i18n="key_34">Companies</a></li>
                        </ul>
                    </li>
                    <li><a href="#announcements" class="block text-gray-700 hover:text-red-600 transition-colors duration-300 dashboard-link sidebar-link" data-content="announcements-content" data-i18n="key_2">Announcements</a></li>
                    <li><a href="#settings" class="block text-gray-700 hover:text-red-600 transition-colors duration-300 dashboard-link sidebar-link" data-content="settings-content" data-i18n="key_35">Settings</a></li>
                </ul>
            </div>
        </aside>
        <main class="flex-1 bg-white shadow rounded-lg p-6 dashboard-main">
            <!-- Main Content -->
            <h2 id="dashboard-title" class="text-2xl font-semibold text-gray-800 mb-4 dashboard-main-title">Overview</h2>
            <div id="dashboard-content" class="hidden dashboard-main-content">
                <p class="text-gray-700" data-i18n="key_36">Welcome to the admin dashboard.</p>
            </div>

            <div id="overview-content" class="dashboard-section hidden">
                <h3 class="text-lg font-semibold text-gray-800 mb-4 dashboard-section-title" data-i18n="key_37">System Overview</h3>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6 dashboard-section-content">
                    <div class="metric-box">
                        <div class="metric-label" data-i18n="key_38">Total Users</div>
                        <div class="metric-value text-blue-600">150</div>
                    </div>
                    <div class="metric-box">
                        <div class="metric-label" data-i18n="key_33">Accountants</div>
                        <div class="metric-value text-green-600">10</div>
                    </div>
                    <div class="metric-box">
                        <div class="metric-label" data-i18n="key_34">Companies</div>
                        <div class="metric-value text-yellow-600">25</div>
                    </div>
                </div>

              

                <h3 class="text-lg font-semibold text-gray-800 mb-4 dashboard-section-title" data-i18n="key_39">Earnings</h3>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6 dashboard-section-content">
                    <div class="metric-box">
                        <div class="metric-label" data-i18n="key_40">Total Earnings</div>
                        <div class="metric-value text-teal-600">$500,000</div>
                    </div>
                    <div class="metric-box">
                        <div class="metric-label">Monthly Earnings</div>
                        <div class="metric-value text-lime-600">$50,000</div>
                    </div>
                    <div class="metric-box">
                        <div class="metric-label" data-i18n="key_41">Pending Payments</div>
                        <div class="metric-value text-amber-600">$15,000</div>
                    </div>
                </div>

                <h3 class="text-lg font-semibold text-gray-800 mb-4 dashboard-section-title" data-i18n="key_42">Recent Admin Actions</h3>
                <div class="scrollable-list-box dashboard-section-content">
                    <ul class="list-none p-0" >
                        <li class="scrollable-list-item">
                            Admin John Doe created a new user "Jane Smith".
                            <p class="text-sm text-gray-600">5 minutes ago</p>
                        </li>
                        <li class="scrollable-list-item">
                            Admin Alice Brown updated user roles for "Peter Jones".
                            <p class="text-sm text-gray-600">15 minutes ago</p>
                        </li>
                        <li class="scrollable-list-item">
                            Admin David Green approved 3 pending user requests.
                            <p class="text-sm text-gray-600">30 minutes ago</p>
                        </li>
                    </ul>
                </div>
            </div>

            <!-- Accountants Content -->
            <div id="accountants-content" class="dashboard-section hidden">
                <h3 class="text-lg font-semibold text-gray-800 mb-2 dashboard-section-title" data-i18n="key_43">Accountants Management</h3>
                <p class="text-gray-700 dashboard-section-description" data-i18n="key_44">Manage accountant accounts and their details.</p>
                <button id="openAddAccountantModal" class="button-primary mb-4 dashboard-section-button" data-i18n="key_45">Add New Accountant</button>
                 <div class="scrollable-list-box dashboard-section-content">
                    <ul class="list-none p-0">
                        <li class="scrollable-list-item">
                            <div class="flex-grow">
                                <p class="font-semibold">Jane Doe</p>
                                <p class="text-gray-600">jane.doe@example.com</p>
                            </div>
                            <button class="button-primary text-sm">Edit</button>
                        </li>
                        <li class="scrollable-list-item">
                            <div class="flex-grow">
                                <p class="font-semibold">John Smith</p>
                                <p class="text-gray-600">john.smith@example.com</p>
                            </div>
                            <button class="button-primary text-sm">Edit</button>
                        </li>
                    </ul>
                </div>
            </div>

            <!-- Companies Content -->
            <div id="companies-content" class="dashboard-section hidden">
                <h3 class="text-lg font-semibold text-gray-800 mb-2 dashboard-section-title" data-i18n="key_34">Companies Management</h3>
                <p class="text-gray-700 dashboard-section-description" data-i18n="key_46">Manage company profiles and their information.</p>
                <button id="openAddCompanyModal" class="button-primary mb-4 dashboard-section-button" data-i18n="key_45">Add New Company</button>
                <div class="scrollable-list-box dashboard-section-content">
                    <ul class="list-none p-0">
                        <li class="scrollable-list-item">
                            <div class="flex-grow">
                                <p class="font-semibold">Example Corp</p>
                                <p class="text-gray-600">info@example.com</p>
                            </div>
                            <button class="button-primary text-sm">Edit</button>
                        </li>
                        <li class="scrollable-list-item">
                            <div class="flex-grow">
                                <p class="font-semibold">Global Inc</p>
                                <p class="text-gray-600">contact@global.com</p>
                            </div>
                            <button class="button-primary text-sm">Edit</button>
                        </li>
                    </ul>
                </div>
            </div>

            <!-- Managers Content -->
            <div id="managers-content" class="dashboard-section hidden">
                <h3 class="text-lg font-semibold text-gray-800 mb-2 dashboard-section-title" data-i18n="key_32">Managers Management</h3>
                <p class="text-gray-700 dashboard-section-description" data-i18n="key_47">Manage manager accounts and their roles.</p>
                <button id="openAddManagerModal" class="button-primary mb-4 dashboard-section-button" data-i18n="key_45">Add New Manager</button>

                <div class="scrollable-list-box dashboard-section-content">
                    <ul class="list-none p-0">
                        <li class="scrollable-list-item">
                            <div class="flex-grow">
                                <p class="font-semibold">Alice Brown</p>
                                <p class="text-gray-600">alice.brown@example.com</p>
                            </div>
                            <button class="button-primary text-sm">Edit</button>
                        </li>
                        <li class="scrollable-list-item">
                            <div class="flex-grow">
                                <p class="font-semibold">Bob Green</p>
                                <p class="text-gray-600">bob.green@example.com</p>
                            </div>
                            <button class="button-primary text-sm">Edit</button>
                        </li>
                    </ul>
                </div>
            </div>

            <!-- Accountant Approval Content -->


            <!-- Announcements Content -->
            <div id="announcements-content" class="dashboard-section hidden">
                <h3 class="text-lg font-semibold text-gray-800 mb-2 dashboard-section-title" data-i18n="key_2">Announcements</h3>
                <p class="text-gray-700 mb-4 dashboard-section-description" data-i18n="key_2">Manage announcements.</p>
                <button id="openAnncmntModalBtn" class="button-primary mb-4 dashboard-section-button" data-i18n="key_45">Create New Announcement</button>

                <div id="old-announcements" class="scrollable-list-box dashboard-section-content">
                 
                </div>
            </div>

            <!-- Audit Log Content -->
            

            <!-- Settings Content -->
            <div id="settings-content" class="dashboard-section hidden">
                <h3 class="text-lg font-semibold text-gray-800 mb-2 dashboard-section-title" data-i18n="key_35">Admin Settings</h3>
                <p class="text-gray-700 dashboard-section-description" data-i18n="key_35">Manage admin account settings and system configurations.</p>
                <ul>
                    <li><a href="#" class="text-blue-500 hover:text-blue-700">Profile Information</a></li>
                    <li><a href="#" class="text-blue-500 hover:text-blue-700">System Configuration</a></li>
                    <li><a href="#" class="text-blue-500 hover:text-blue-700">Notification Settings</a></li>
                </ul>
            </div>
        </main> 
    </div>

    <footer class="py-4 text-center text-gray-700 bg-white mt-8">
        <p>© {new Date().getFullYear()} Mohassabatech. All rights reserved.</p>
    </footer>


<div id="createAnncmntModal" class="hidden fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50">
    <div class="relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white">
        <button id="closeAnncmntModalBtn" class="absolute top-0 right-0 mt-2 mr-2 text-gray-600 hover:text-gray-800">
            <svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
            </svg>
        </button>
        <form id="createAnncmntForm" class="mt-4">
            <div class="mb-4">
                <label for="anncmntTitle" class="block text-gray-700 text-sm font-bold mb-2">Title</label>
                <input type="text" id="anncmntTitle" class="shadow border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline" placeholder="Enter announcement title" required>
            </div>
            <div class="mb-6">
                <label for="anncmntDescription" class="block text-gray-700 text-sm font-bold mb-2">Description</label>
                <textarea id="anncmntDescription" class="shadow border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline" placeholder="Enter announcement description" required></textarea>
            </div>
           
            <div class="mb-6">
                <label for="anncmntCategory" class="block text-gray-700 text-sm font-bold mb-2">Category</label>
                <select id="anncmntCategory" class="shadow border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline" required>
                    <option value="Tax Law">Tax Law</option>
                    <option value="Finance Law">Finance Law</option>
                    <option value="Commerce Law">Commerce Law</option>
                    <option value="Platform Update">Platform Update</option>
                </select> 
                <button type="submit" class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline">Create Announcement</button>
            </div>
        </form>
    </div>
</div>

    <script src="../../script.js"></script>
    <script type="module" src="../main pages/js/auth.js"></script>

  <script type="module" src="../main pages/js/createAnncmntModal.js"></script>
  <script type="module" src="../main pages/js/auth.js"></script>
  <div id="createUserModal" class="hidden fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50">
    <div class="relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white">
        <button id="closeUserModalBtn" class="absolute top-0 right-0 mt-2 mr-2 text-gray-600 hover:text-gray-800">
            <svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
            </svg>
        </button>
        <form id="createUserForm" class="mt-4">
            <div id="usernameField" class="form-field mb-4">
                <label for="username" class="block text-gray-700 text-sm font-bold mb-2">Username</label>
                <input type="text" id="username" class="shadow border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline" required>
            </div>
            <div id="emailField" class="form-field mb-4">
                <label for="email" class="block text-gray-700 text-sm font-bold mb-2">Email</label>
                <input type="email" id="email" class="shadow border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline" required>
            </div>
            <div id="passwordField" class="form-field mb-4">
                <label for="password" class="block text-gray-700 text-sm font-bold mb-2">Password</label>
                <input type="password" id="password" class="shadow border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline" required>
            </div>
            <div id="phoneField" class="form-field mb-4 hidden">
                <label for="phone" class="block text-gray-700 text-sm font-bold mb-2">Phone Number</label>
                <input type="text" id="phone" class="shadow border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline">
            </div>
            <div id="addressField" class="form-field mb-4 hidden">
                <label for="address" class="block text-gray-700 text-sm font-bold mb-2">Address</label>
                <input type="text" id="address" class="shadow border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline">
            </div>
            <div id="companyNameField" class="form-field mb-4 hidden">
                <label for="companyName" class="block text-gray-700 text-sm font-bold mb-2">Company Name</label>
                <input type="text" id="companyName" class="shadow border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline">
            </div>
            <button type="submit" class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline">Create User</button>
        </form>
    </div>
</div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/i18next/23.7.16/i18next.min.js"></script>
    <script>
         fetch('../../locales/en.json')
             .then(response => response.json())
             .then(englishTranslations => {
                 fetch('../../locales/fr.json')
                     .then(response => response.json())
                     .then(frenchTranslations => {
                         fetch('../../locales/ar.json')
                             .then(response => response.json())
                             .then(arabicTranslations => {
                                 i18next.init({
                                     lng: localStorage.getItem('selectedLanguage') || 'en',

                                     resources: {
                                         en: {
                                             translation: englishTranslations
                                         },
                                         fr: {
                                             translation: frenchTranslations
                                         },
                                         ar: {
                                             translation: arabicTranslations
                                         }
                                     }
                                 }).then(function (t) {
                                     updateContent();
                                     const languageSwitcher = document.getElementById('language-switcher');
                                     if (languageSwitcher) {
                                         languageSwitcher.value = i18next.language;
                                         languageSwitcher.addEventListener('change', function () {
                                             const selectedLanguage = languageSwitcher.value;
                                             i18next.changeLanguage(selectedLanguage).then(() => {
                                                 updateContent();
                                                 localStorage.setItem('selectedLanguage', selectedLanguage);
                                             });
                                         });
                                     }
                                 });
                             });
                     });
             });

                            function updateContent() {
                                document.querySelectorAll('[data-i18n]').forEach(function (element) {
                                    element.textContent = i18next.t(element.dataset.i18n);
                                });
                                if (i18next.language == "ar") {
                                    document.body.classList.add('arabic-layout');
                                } else {
                                    document.body.classList.remove('arabic-layout');
                                }
                            }
  
     </script>
     <script type="module">
     import { logout } from '../main%20pages/js/auth.js';
   
     const logoutButton = document.getElementById('logoutButton');
       if (logoutButton) {
           logoutButton.addEventListener('click', logout);
       }
 </script>
 <script src="../../script.js"></script>
 <script type="module" src="../main pages/js/auth.js"></script>
 <script type="module" src="../main pages/js/createAnncmntModal.js"></script>
 <script type="module" src="../main pages/js/createUserModal.js"></script>
 <script type="module" src="../main pages/js/fetchAnnouncements.js"></script>
</body>
</html>
